{"version":3,"file":"index.js","mappings":"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CZF;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC,mBAAO,CAAC,0BAAU;AACnD;AACA;AACA;AACA;AACA,4CAA4C,kCAAkC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB,aAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,wDAAwD,kDAAkD;AAC1G;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wDAAwD;AACxG;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACjKF;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,mBAAO,CAAC,sBAAQ;AAC/C;;;;;;;;;;;ACNa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,mBAAO,CAAC,wBAAS;AACjD,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C,oCAAoC,mBAAO,CAAC,gCAAa;AACzD,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C,2BAA2B,mBAAO,CAAC,cAAI;AACvC,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C,+BAA+B,mBAAO,CAAC,oCAAa;AACpD;AACA;AACA;AACA;AACA;AACA,4CAA4C,qCAAqC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,sCAAsC,aAAa;AACnD;AACA,oDAAoD,gBAAgB;AACpE,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,2CAA2C,2CAA2C;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA,qCAAqC;AACrC,8BAA8B,aAAoB,IAAI,CAAa;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACvGF;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAO,CAAC,wCAAa;AACrB,+BAA+B,mBAAO,CAAC,8CAAgB;AACvD,iCAAiC,mBAAO,CAAC,kDAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACda;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uCAAuC,mBAAO,CAAC,yEAA8B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qBAAqB;AACjC;AACA;AACA;AACA;AACA,eAAe;;;;;;;;;;;ACxBf;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://express-server-architecture-boilerplate/./src/api/example/example.controller.ts","webpack://express-server-architecture-boilerplate/./src/api/example/example.model.ts","webpack://express-server-architecture-boilerplate/./src/api/example/example.router.ts","webpack://express-server-architecture-boilerplate/./src/common/database.ts","webpack://express-server-architecture-boilerplate/./src/common/env.ts","webpack://express-server-architecture-boilerplate/./src/common/server.ts","webpack://express-server-architecture-boilerplate/./src/index.ts","webpack://express-server-architecture-boilerplate/./src/routes.ts","webpack://express-server-architecture-boilerplate/external \"body-parser\"","webpack://express-server-architecture-boilerplate/external \"cors\"","webpack://express-server-architecture-boilerplate/external \"dotenv\"","webpack://express-server-architecture-boilerplate/external \"express\"","webpack://express-server-architecture-boilerplate/external \"http\"","webpack://express-server-architecture-boilerplate/external \"mongoose\"","webpack://express-server-architecture-boilerplate/external \"os\"","webpack://express-server-architecture-boilerplate/external \"path\"","webpack://express-server-architecture-boilerplate/webpack/bootstrap","webpack://express-server-architecture-boilerplate/webpack/before-startup","webpack://express-server-architecture-boilerplate/webpack/startup","webpack://express-server-architecture-boilerplate/webpack/after-startup"],"sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.checkOwnership = exports.getByName = exports.createExampleDocument = void 0;\r\nvar example_model_1 = __importDefault(require(\"./example.model\"));\r\n/**\r\n * ### createExampleDocument\r\n * Create a new example document from the request body's JSON data.\r\n * @param  {express.Request} req\r\n * @param  {express.Response} res\r\n * @param  {express.NextFunction} next\r\n * @returns {void}\r\n */\r\nfunction createExampleDocument(req, res, next) {\r\n    var exampleFromBody = req.body;\r\n    var example = new example_model_1.default(exampleFromBody);\r\n    example.save(function (err) {\r\n        if (err)\r\n            return next(err);\r\n        res.json(example);\r\n    });\r\n}\r\nexports.createExampleDocument = createExampleDocument;\r\n/**\r\n * ### getByName\r\n * Get a example document by its name.\r\n * @param  {express.Request} req\r\n * @param  {express.Response} res\r\n * @param  {express.NextFunction} next\r\n * @returns {Promise<void>}\r\n */\r\nfunction getByName(req, res, next) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var query, example;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    query = req.body.name;\r\n                    return [4 /*yield*/, example_model_1.default.getByName(query)];\r\n                case 1:\r\n                    example = _a.sent();\r\n                    if (!example)\r\n                        return [2 /*return*/, next(new Error('Example document not found'))];\r\n                    res.json(example);\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.getByName = getByName;\r\n/**\r\n * ### checkOwnership\r\n * Check a example document's ownership by its name & owner.\r\n * @param  {express.Request} req\r\n * @param  {express.Response} res\r\n * @param  {express.NextFunction} next\r\n * @returns {Promise<void>}\r\n */\r\nfunction checkOwnership(req, res, next) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var query, owner, example, isOwner;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    query = req.body.name;\r\n                    owner = req.body.owner;\r\n                    return [4 /*yield*/, example_model_1.default.getByName(query)];\r\n                case 1:\r\n                    example = _a.sent();\r\n                    if (!example)\r\n                        return [2 /*return*/, next(new Error('Example not found'))];\r\n                    isOwner = example.checkOwnership(owner);\r\n                    res.json(isOwner);\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.checkOwnership = checkOwnership;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mongoose_1 = __importDefault(require(\"mongoose\"));\r\nvar exampleSchema = new mongoose_1.default.Schema({\r\n    name: { type: String, required: true },\r\n    description: { type: String, required: true },\r\n    created: { type: Date, default: Date.now },\r\n    modified: { type: Date, default: Date.now },\r\n    owner: { type: String, required: true },\r\n    tags: { type: [String], default: [] },\r\n    content: { type: String, default: '' },\r\n});\r\nexampleSchema.methods = {\r\n    /**\r\n     * ### checkOwnership\r\n     * Example method that checks if the owner of a specified \\\r\n     * example document is the same as the given owner parameter.\r\n     * @param {string} owner\r\n     * @returns {boolean}\r\n     */\r\n    checkOwnership: function (owner) {\r\n        return this.owner === owner;\r\n    },\r\n};\r\nexampleSchema.statics = {\r\n    /**\r\n     * ### getByName\r\n     * Example static method that gets a single document by name.\r\n     * @param  {string} name\r\n     * @returns {Promise<ExampleDocument | undefined>}\r\n     */\r\n    getByName: function (name) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.findOne({ name: name }).exec()];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    },\r\n};\r\n/**\r\n * ## exampleModel\r\n * Mongoose model that implements the exampleSchema & IExampleModel interface.\r\n * @extends {ExampleDocument, IExampleModel}\r\n */\r\nvar exampleModel = mongoose_1.default.model('Example', exampleSchema);\r\nexports.default = exampleModel;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar express_1 = __importDefault(require(\"express\"));\r\nvar example_controller_1 = require(\"./example.controller\");\r\nvar exampleRouter = express_1.default.Router();\r\nexampleRouter.get('/', function (req, res) { return res.send('Hello from Example Router!'); });\r\nexampleRouter.get('/checkOwner', example_controller_1.checkOwnership);\r\nexampleRouter.get('/getByName', example_controller_1.getByName);\r\nexampleRouter.post('/create', example_controller_1.createExampleDocument);\r\nexports.default = exampleRouter;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mongoose_1 = __importDefault(require(\"mongoose\"));\r\n/**\r\n * ## Database\r\n * Database class that is responsible for the creation of the main database \\\r\n * in this application. By initializing a new instance of this class, database \\\r\n * is created and must be started with the {@link Database.connect connect  } method.\r\n * @class Database\r\n */\r\nvar Database = /** @class */ (function () {\r\n    function Database() {\r\n        /**\r\n         * ### Mongoose connection options\r\n         * @type {mongoose.ConnectOptions}\r\n         */\r\n        this.options = {\r\n            useNewUrlParser: true,\r\n            useUnifiedTopology: true,\r\n            useCreateIndex: true,\r\n            useFindAndModify: false,\r\n        };\r\n    }\r\n    /**\r\n     * ### getConnectionString\r\n     * Get the connection string for the database corresponding to the current environment.\r\n     *\r\n     * Available environments:\r\n     * - `development`\r\n     * - `test`\r\n     * - `production`\r\n     *\r\n     * Specifiy the environment with the `NODE_ENV` environment variable.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Database.prototype.getConnectionString = function () {\r\n        switch (process.env.NODE_ENV) {\r\n            case 'development':\r\n                return 'mongodb://localhost/dbname-dev';\r\n            case 'production':\r\n                return (process.env.MONGODB_URI ||\r\n                    'mongodb://localhost:27017/dbname-prod');\r\n            default:\r\n                return 'mongodb://localhost/dbname-test';\r\n        }\r\n    };\r\n    /**\r\n     * ### connect\r\n     * Connect to the database with the calculated connectionstring, \\\r\n     * and retrieve a mongoose connection object.\r\n     *\r\n     * ```typescript\r\n     * // Start database\r\n     * const database = new Database();\r\n     * database.connect();\r\n     * ```\r\n     *\r\n     * @returns {Promise<mongoose.Connection>}\r\n     */\r\n    Database.prototype.connect = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var connectionString, db;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        connectionString = this.getConnectionString();\r\n                        return [4 /*yield*/, mongoose_1.default\r\n                                .connect(connectionString, this.options)\r\n                                .then(function () {\r\n                                console.info(\"*** Connected to database: \" + connectionString);\r\n                            })\r\n                                .catch(function (err) {\r\n                                console.error(\"*** Failed to connect to database: \" + connectionString, err);\r\n                            })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        db = mongoose_1.default.connection;\r\n                        db.on('error', function (err) { return console.log('*** Database error: ', err); });\r\n                        return [2 /*return*/, db];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * ### disconnect\r\n     * Disconnect from the database.\r\n     * @returns {Promise<void>}\r\n     */\r\n    Database.prototype.disconnect = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, mongoose_1.default\r\n                            .disconnect()\r\n                            .then(function () { return console.info('*** Disconnected from database'); })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * ### clear\r\n     * Clear the database.\r\n     * @returns {Promise<void>}\r\n     */\r\n    Database.prototype.clear = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, mongoose_1.default.connection.dropDatabase()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Database;\r\n}());\r\nexports.default = Database;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dotenv_1 = __importDefault(require(\"dotenv\"));\r\ndotenv_1.default.config();\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar express_1 = __importDefault(require(\"express\"));\r\nvar cors_1 = __importDefault(require(\"cors\"));\r\nvar body_parser_1 = __importDefault(require(\"body-parser\"));\r\nvar path_1 = __importDefault(require(\"path\"));\r\nvar os_1 = __importDefault(require(\"os\"));\r\nvar http_1 = __importDefault(require(\"http\"));\r\nvar routes_1 = __importDefault(require(\"@src/routes\"));\r\nvar root = path_1.default.normalize(__dirname + '/../..');\r\n/**\r\n * ## ExpressServer\r\n * Server class that is responsible for the creation of the express server used \\\r\n * in this application. By initializing a new instance of this class, the express server \\\r\n * is created and must be started with the {@link ExpressServer.listen listen  } method.\r\n * @class ExpressServer\r\n */\r\nvar ExpressServer = /** @class */ (function () {\r\n    /**\r\n     * ### constructor\r\n     * Initializes the http server in the desired order.\r\n     * 1. Initialize the default middleware\r\n     * 2. Serve static files\r\n     * 3. Serve custom routes\r\n     * 4. Initialize error handler middleware\r\n     */\r\n    function ExpressServer() {\r\n        this.app = express_1.default();\r\n        this.initialize();\r\n        this.serveStatic();\r\n        this.serveRoutes();\r\n        this.initializeErrorHandlers();\r\n    }\r\n    /**\r\n     * ### initialize\r\n     * Initializes the default middleware configuration for the server.\r\n     * @returns {void}\r\n     */\r\n    ExpressServer.prototype.initialize = function () {\r\n        this.app.use(cors_1.default({ origin: '*' }));\r\n        this.app.use(express_1.default.json());\r\n        this.app.use(express_1.default.urlencoded({ extended: true }));\r\n        this.app.use(body_parser_1.default.urlencoded({ extended: true }));\r\n    };\r\n    /**\r\n     * ### serveStatic\r\n     * Serves static files from the root/static directory.\r\n     * @returns {void}\r\n     */\r\n    ExpressServer.prototype.serveStatic = function () {\r\n        this.app.use('/static', express_1.default.static(root + \"/static\"));\r\n    };\r\n    /**\r\n     * ### serveRoutes\r\n     * Serves custom routes from the routes directory.\r\n     * @returns {void}\r\n     */\r\n    ExpressServer.prototype.serveRoutes = function () {\r\n        routes_1.default(this.app);\r\n    };\r\n    /**\r\n     * ### initializeErrorHandlers\r\n     * Initializes the default error handlers for the server.\r\n     * @returns {void}\r\n     */\r\n    ExpressServer.prototype.initializeErrorHandlers = function () {\r\n        this.app.use(function (req, res) { return res.status(404).send('Not found'); });\r\n    };\r\n    /**\r\n     * ### listen\r\n     * Run a http server with the express app and listen on the specified port.\r\n     *\r\n     * ```typescript\r\n     * // Start server\r\n     * const port = 3000;\r\n     * const server = new Server();\r\n     * server.listen(port);\r\n     * ```\r\n     *\r\n     * @param  {number} port\r\n     * @returns {express.Application} express\r\n     */\r\n    ExpressServer.prototype.listen = function (port) {\r\n        /**\r\n         * ### welcome\r\n         * Generates a welcome message for the server log.\r\n         * @param  {number} p\r\n         * @returns void\r\n         */\r\n        var welcome = function (p) { return function () {\r\n            var environment = process.env.NODE_ENV || 'development';\r\n            var device = os_1.default.hostname();\r\n            var message = \"*** Server running in: \" + environment + \" @: \" + device + \" on port: \" + p;\r\n            console.log(message);\r\n        }; };\r\n        http_1.default.createServer(this.app).listen(port, welcome(port));\r\n        return this.app;\r\n    };\r\n    return ExpressServer;\r\n}());\r\nexports.default = ExpressServer;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nrequire(\"@common/env\");\r\nvar server_1 = __importDefault(require(\"@common/server\"));\r\nvar database_1 = __importDefault(require(\"@common/database\"));\r\n// Start server\r\nvar port = parseInt(process.env.PORT || '3000');\r\nvar server = new server_1.default();\r\nserver.listen(port);\r\n// Start database\r\nvar database = new database_1.default();\r\ndatabase.connect();\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar example_router_1 = __importDefault(require(\"./api/example/example.router\"));\r\n/**\r\n * ## Routes\r\n * Configure the custom routes for the api application by \\\r\n * using the imported routers on their provided path.\r\n *\r\n * ```typescript\r\n * // Example usage\r\n * export default function routes(app: express.Application) {\r\n * \tapp.use('/api', apiRouter);\r\n * \tapp.use('/user', userRouter);\r\n * \tapp.use('/products', productRouter);\r\n * }\r\n * ```\r\n * @param  {express.Application} app\r\n */\r\nfunction routes(app) {\r\n    app.use('/example', example_router_1.default);\r\n}\r\nexports.default = routes;\r\n","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"mongoose\");","module.exports = require(\"os\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}